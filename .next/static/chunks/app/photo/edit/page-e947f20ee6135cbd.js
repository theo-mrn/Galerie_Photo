(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[342],{285:(e,r,a)=>{"use strict";a.d(r,{$:()=>n});var t=a(5155);a(2115);var i=a(4624),s=a(2085),l=a(9434);let o=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function n(e){let{className:r,variant:a,size:s,asChild:n=!1,...d}=e,c=n?i.DX:"button";return(0,t.jsx)(c,{"data-slot":"button",className:(0,l.cn)(o({variant:a,size:s,className:r})),...d})}},793:(e,r,a)=>{"use strict";a.d(r,{A:()=>o});var t=a(5155),i=a(2115),s=a(6408),l=a(9434);function o(e){let{threshold:r=300,className:a,smooth:o=!0}=e,[n,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=()=>{d(window.scrollY>r)};return e(),window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[r]),(0,t.jsx)(s.P.button,{onClick:()=>{o?window.scrollTo({top:0,behavior:"smooth"}):window.scrollTo(0,0)},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),className:(0,l.cn)("fixed bottom-6 right-6 z-50 flex h-14 w-14 items-center justify-center rounded-full bg-white/5 backdrop-blur-sm shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 hover:bg-white/10",a),initial:{opacity:0,y:100},animate:{opacity:+!!n,y:100*!n,scale:c?1.05:1},transition:{opacity:{duration:.2},y:{duration:.3,type:"spring"},scale:{duration:.2}},"aria-label":"Retour en haut de la page",children:(0,t.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)(s.P.path,{d:"M12 9L6 15",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",animate:{d:c?"M6 10L12 4":"M12 9L6 15"},transition:{duration:.25,ease:"easeOut"}}),(0,t.jsx)(s.P.path,{d:"M12 9L18 15",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",animate:{d:c?"M18 10L12 4":"M12 9L18 15"},transition:{duration:.25,ease:"easeOut"}}),(0,t.jsx)(s.P.path,{d:"M12 9L12 9",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{d:c?"M12 4L12 20":"M12 9L12 9",pathLength:+!!c},transition:{d:{duration:.25,ease:"easeOut"},pathLength:{duration:.25,delay:.1}}})]})})}},2069:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>V});var t=a(5155),i=a(2115),s=a(6766),l=a(6408),o=a(760),n=a(9946);let d=(0,n.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),c=(0,n.A)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);var u=a(3311),m=a(2657);let p=(0,n.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var h=a(4355);let g=(0,n.A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var x=a(4416);let v=(0,n.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var b=a(4653);let f=(0,n.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var y=a(4516);let j=(0,n.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),w=(0,n.A)("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);var k=a(9434);let N=i.forwardRef((e,r)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{ref:r,className:(0,k.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...i})});N.displayName="Card";let P=i.forwardRef((e,r)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{ref:r,className:(0,k.cn)("flex flex-col space-y-1.5 p-6",a),...i})});P.displayName="CardHeader";let U=i.forwardRef((e,r)=>{let{className:a,...i}=e;return(0,t.jsx)("h3",{ref:r,className:(0,k.cn)("text-2xl font-semibold leading-none tracking-tight",a),...i})});U.displayName="CardTitle",i.forwardRef((e,r)=>{let{className:a,...i}=e;return(0,t.jsx)("p",{ref:r,className:(0,k.cn)("text-sm text-muted-foreground",a),...i})}).displayName="CardDescription";let L=i.forwardRef((e,r)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{ref:r,className:(0,k.cn)("p-6 pt-0",a),...i})});L.displayName="CardContent",i.forwardRef((e,r)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{ref:r,className:(0,k.cn)("flex items-center p-6 pt-0",a),...i})}).displayName="CardFooter";var A=a(285);function z(e){let{className:r,type:a,...i}=e;return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,k.cn)("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...i})}let R=i.forwardRef((e,r)=>{let{className:a,...i}=e;return(0,t.jsx)("textarea",{className:(0,k.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:r,...i})});R.displayName="Textarea",a(7650);var C=a(4624),T=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let a=(0,C.TL)(`Primitive.${r}`),s=i.forwardRef((e,i)=>{let{asChild:s,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(s?a:r,{...l,ref:i})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{}),E=i.forwardRef((e,r)=>(0,t.jsx)(T.label,{...e,ref:r,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));function M(e){let{className:r,...a}=e;return(0,t.jsx)(E,{"data-slot":"label",className:(0,k.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...a})}E.displayName="Label";var H=a(6126),S="horizontal",q=["horizontal","vertical"],I=i.forwardRef((e,r)=>{var a;let{decorative:i,orientation:s=S,...l}=e,o=(a=s,q.includes(a))?s:S;return(0,t.jsx)(T.div,{"data-orientation":o,...i?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...l,ref:r})});I.displayName="Separator";let O=i.forwardRef((e,r)=>{let{className:a,orientation:i="horizontal",decorative:s=!0,...l}=e;return(0,t.jsx)(I,{ref:r,decorative:s,orientation:i,className:(0,k.cn)("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",a),...l})});O.displayName=I.displayName;var F=a(8999),$=a(6671),D=a(793);function V(){let e=(0,F.useRouter)(),r=(0,i.useRef)({}),[a,n]=(0,i.useState)([{id:1,title:"Premiers pas en Italie",description:"Les rues pav\xe9es de Rome racontent des histoires mill\xe9naires. Chaque coin de rue r\xe9v\xe8le un nouveau chapitre de l'histoire, entre architecture antique et vie moderne qui s'entrem\xealent parfaitement.",imageUrl:"/images/stories/rome-default.jpg",location:"Rome, Italie",displayType:"single"},{id:2,title:"Coucher de soleil \xe0 Santorin",description:"Les maisons blanches contrastent avec le bleu profond de la mer \xc9g\xe9e. Le soleil couchant peint le ciel de teintes orang\xe9es et roses, cr\xe9ant un tableau naturel \xe0 couper le souffle.",imageUrl:["/images/stories/santorin-1.jpg","/images/stories/santorin-2.jpg","/images/stories/santorin-3.jpg"],location:"Santorin, Gr\xe8ce",displayType:"carousel"},{id:3,title:"For\xeats du Japon",description:"Perdus dans les for\xeats de bambous d'Arashiyama, nous avons d\xe9couvert une tranquillit\xe9 rare. Le bruissement des feuilles et la lumi\xe8re filtr\xe9e cr\xe9ent une atmosph\xe8re presque mystique.",imageUrl:"/images/stories/japon-default.jpg",location:"Arashiyama, Japon",displayType:"single"},{id:4,title:"March\xe9s color\xe9s de Marrakech",description:"Une explosion de couleurs, d'odeurs et de sons. Les souks de Marrakech sont une exp\xe9rience sensorielle compl\xe8te, o\xf9 chaque all\xe9e r\xe9v\xe8le de nouveaux tr\xe9sors artisanaux.",imageUrl:["/images/stories/marrakech-1.jpg","/images/stories/marrakech-2.jpg","/images/stories/marrakech-3.jpg","/images/stories/marrakech-4.jpg"],location:"Marrakech, Maroc",displayType:"carousel"}]),[C,T]=(0,i.useState)("/images/hero/hero-default.jpg"),[E,S]=(0,i.useState)({}),[q,I]=(0,i.useState)(null),[V,_]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/gallery-config");if(e.ok){let r=await e.json();T(r.heroImage),n(r.photoStories),$.oR.success("Configuration charg\xe9e")}}catch(e){console.error("Erreur lors du chargement de la configuration:",e),$.oR.error("Erreur lors du chargement de la configuration")}})()},[]);let W=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stories",a=new FormData;a.append("file",e),a.append("folder",r);let t=await fetch("/api/upload",{method:"POST",body:a});if(!t.ok)throw Error("Erreur lors de l'upload");return(await t.json()).url},J=(0,i.useCallback)((e,r)=>{if(!r)return;let t=[];Array.from(r).forEach(e=>{if(e.type.startsWith("image/")){let r=URL.createObjectURL(e);t.push({file:e,preview:r,name:e.name})}}),S(r=>{let i={...r,[e]:[...r[e]||[],...t]},s=a.find(r=>r.id===e);if(s){let r=(Array.isArray(s.imageUrl)?s.imageUrl.length:+!!s.imageUrl)+i[e].length>1?"carousel":"single";s.displayType!==r&&(n(a=>a.map(a=>a.id===e?{...a,displayType:r}:a)),$.oR.info("Type d'affichage chang\xe9 automatiquement en ".concat("carousel"===r?"carrousel":"image unique")))}return i}),$.oR.success("".concat(t.length," image(s) ajout\xe9e(s) pour upload"))},[a]),G=(0,i.useCallback)(e=>{if(!e||0===e.length)return;let r=e[0];if(r.type.startsWith("image/")){let e=URL.createObjectURL(r);I({file:r,preview:e,name:r.name}),$.oR.success("Image de couverture pr\xeate pour upload")}},[]),B=async(e,r)=>{let t,i=a.find(r=>r.id===e);if(i){if((t=Array.isArray(i.imageUrl)?i.imageUrl[r]:i.imageUrl)&&!t.includes("default")&&!t.includes("placeholder"))try{await fetch("/api/delete-image",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:t})})}catch(e){console.error("Erreur lors de la suppression du fichier:",e)}if(Array.isArray(i.imageUrl)){let a=i.imageUrl.filter((e,a)=>a!==r),t=a.length>1?"carousel":"single";n(r=>r.map(r=>r.id===e?{...r,imageUrl:a.length>0?a:"",displayType:t}:r))}else n(r=>r.map(r=>r.id===e?{...r,imageUrl:"",displayType:"single"}:r));$.oR.success("Image supprim\xe9e")}},X=(e,r)=>{S(a=>{let t={...a};return t[e]&&(URL.revokeObjectURL(t[e][r].preview),t[e]=t[e].filter((e,a)=>a!==r),0===t[e].length&&delete t[e]),t}),$.oR.success("Image supprim\xe9e de la liste d'upload")},Q=async()=>{if(C&&!C.includes("default")&&!C.includes("placeholder"))try{await fetch("/api/delete-image",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:C})}),T("/images/hero/hero-default.jpg"),$.oR.success("Image de couverture supprim\xe9e")}catch(e){console.error("Erreur lors de la suppression:",e),$.oR.error("Erreur lors de la suppression de l'image")}},Y=(e,r,a)=>{n(t=>t.map(t=>t.id===e?{...t,[r]:a}:t))},K=e=>{n(r=>r.filter(r=>r.id!==e)),S(r=>{let a={...r};return delete a[e],a}),$.oR.success("Histoire supprim\xe9e")},Z=async()=>{_(!0);let e=$.oR.loading("Sauvegarde en cours...",{duration:1e4});try{let r=[...a],t=C;if(q)try{t=await W(q.file,"hero"),URL.revokeObjectURL(q.preview),I(null),T(t)}catch(e){console.error("Erreur upload hero:",e),$.oR.error("Erreur lors de l'upload de l'image de couverture")}for(let e of r)if(E[e.id])try{let r=await Promise.all(E[e.id].map(e=>W(e.file)));E[e.id].forEach(e=>{URL.revokeObjectURL(e.preview)}),Array.isArray(e.imageUrl)?e.imageUrl=[...e.imageUrl,...r]:e.imageUrl?e.imageUrl=[e.imageUrl,...r]:e.imageUrl=1===r.length?r[0]:r;let a=Array.isArray(e.imageUrl)?e.imageUrl.length:1;e.displayType=a>1?"carousel":"single"}catch(r){console.error("Erreur upload pour l'histoire ".concat(e.id,":"),r),$.oR.error("Erreur lors de l'upload des images pour \"".concat(e.title,'"'))}if(S({}),!(await fetch("/api/gallery-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({heroImage:t,photoStories:r})})).ok)throw Error("Erreur lors de la sauvegarde de la configuration");$.oR.success("Toutes les modifications ont \xe9t\xe9 sauvegard\xe9es avec succ\xe8s !",{id:e,duration:4e3})}catch(r){console.error("Erreur lors de la sauvegarde:",r),$.oR.error("Une erreur est survenue lors de la sauvegarde",{id:e,duration:4e3})}finally{_(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-indigo-950",children:[(0,t.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400 to-purple-600 rounded-full opacity-10 animate-pulse"}),(0,t.jsx)("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-gradient-to-tr from-pink-400 to-orange-500 rounded-full opacity-10 animate-pulse delay-1000"}),(0,t.jsx)("div",{className:"absolute top-1/3 right-1/4 w-64 h-64 bg-gradient-to-bl from-green-400 to-blue-500 rounded-full opacity-5 animate-pulse delay-500"})]}),(0,t.jsx)(l.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"sticky top-0 z-50 bg-white/80 backdrop-blur-lg dark:bg-slate-900/80 border-b border-white/20 shadow-lg",children:(0,t.jsx)("div",{className:"container mx-auto px-6 py-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(l.P.div,{className:"flex items-center gap-6",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:[(0,t.jsx)(l.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(A.$,{variant:"ghost",size:"icon",onClick:()=>e.push("/photo"),className:"rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:(0,t.jsx)(d,{size:20})})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"p-2 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500",children:(0,t.jsx)(c,{className:"w-5 h-5 text-white"})}),(0,t.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-slate-800 via-blue-600 to-indigo-600 bg-clip-text text-transparent dark:from-slate-100 dark:via-blue-400 dark:to-indigo-400",children:"Studio d'\xc9dition"})]}),(0,t.jsxs)("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"w-4 h-4"}),"Cr\xe9ez et personnalisez vos histoires de voyage"]})]})]}),(0,t.jsxs)(l.P.div,{className:"flex items-center gap-3",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:[(0,t.jsx)(l.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsxs)(A.$,{variant:"outline",onClick:()=>e.push("/photo"),className:"rounded-full border-2 border-blue-200 hover:border-blue-300 bg-white/50 backdrop-blur-sm hover:bg-white/70 transition-all duration-300",children:[(0,t.jsx)(m.A,{size:16,className:"mr-2"}),"Aper\xe7u en direct"]})}),(0,t.jsx)(l.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(A.$,{onClick:Z,disabled:V,className:"rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 px-6",children:V?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 mr-2 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sauvegarde..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p,{size:16,className:"mr-2"}),"Sauvegarder"]})})})]})]})})}),(0,t.jsx)("div",{className:"container mx-auto px-6 py-12 relative z-10",children:(0,t.jsxs)("div",{className:"space-y-12",children:[(0,t.jsx)(l.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,t.jsxs)(N,{className:"overflow-hidden border-0 shadow-2xl bg-white/80 backdrop-blur-lg dark:bg-slate-800/80",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 p-1",children:(0,t.jsx)(P,{className:"bg-white dark:bg-slate-800 m-1 rounded-lg",children:(0,t.jsxs)(U,{className:"flex items-center gap-3 text-2xl",children:[(0,t.jsx)("div",{className:"p-3 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500",children:(0,t.jsx)(h.A,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Image de Couverture"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-normal mt-1",children:"L'image principale qui accueille vos visiteurs"})]})]})})}),(0,t.jsx)(L,{className:"p-8 space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)(l.P.div,{className:"space-y-4",whileHover:{scale:1.02},transition:{duration:.2},children:[(0,t.jsxs)(M,{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(g,{className:"w-5 h-5"}),"Image actuelle"]}),(0,t.jsxs)("div",{className:"relative aspect-video rounded-xl overflow-hidden border-2 border-slate-200 dark:border-slate-700 group shadow-xl",children:[(0,t.jsx)(s.default,{src:(null==q?void 0:q.preview)||C,alt:"Image de couverture",fill:!0,className:"object-contain rounded-xl transition-transform duration-500 group-hover:scale-105"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),!q&&"/images/hero/hero-default.jpg"!==C&&(0,t.jsx)(l.P.div,{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300",whileHover:{scale:1.05},children:(0,t.jsxs)(A.$,{variant:"destructive",size:"sm",onClick:Q,className:"rounded-full bg-red-500/90 backdrop-blur-sm hover:bg-red-600 text-white shadow-lg",children:[(0,t.jsx)(x.A,{size:16,className:"mr-2"}),"Supprimer"]})})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(M,{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(v,{className:"w-5 h-5"}),"Nouvelle image"]}),(0,t.jsxs)(l.P.div,{className:"border-2 border-dashed border-blue-300 dark:border-blue-700 rounded-xl p-8 text-center cursor-pointer hover:border-blue-400 dark:hover:border-blue-600 transition-all duration-300 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/50 dark:to-indigo-950/50 hover:from-blue-100 hover:to-indigo-100 dark:hover:from-blue-900/50 dark:hover:to-indigo-900/50",onClick:()=>{var e;return null==(e=document.getElementById("hero-upload"))?void 0:e.click()},whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[(0,t.jsx)(l.P.div,{animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0},children:(0,t.jsx)(v,{size:48,className:"mx-auto mb-4 text-blue-500"})}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-300 font-medium mb-2",children:"Cliquez pour uploader une nouvelle image de couverture"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Formats accept\xe9s: JPG, PNG, WebP • R\xe9solution recommand\xe9e: 1920x1080"}),(0,t.jsx)("input",{id:"hero-upload",type:"file",accept:"image/*",className:"hidden",onChange:e=>G(e.target.files)})]}),q&&(0,t.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between p-4 bg-green-50 dark:bg-green-950/30 rounded-xl border border-green-200 dark:border-green-800",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 relative rounded-lg overflow-hidden",children:(0,t.jsx)(s.default,{src:q.preview,alt:"Preview",fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm font-medium text-green-700 dark:text-green-300 truncate block max-w-48",children:q.name}),(0,t.jsx)("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Pr\xeat pour l'upload"})]})]}),(0,t.jsx)(l.P.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,t.jsx)(A.$,{variant:"ghost",size:"sm",onClick:()=>{q&&(URL.revokeObjectURL(q.preview),I(null),$.oR.success("Image de couverture supprim\xe9e de l'upload"))},className:"text-green-600 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-950/30 transition-colors duration-200",children:(0,t.jsx)(x.A,{size:16})})})]})]})]})})]})}),(0,t.jsxs)(l.P.div,{className:"space-y-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-slate-800 via-blue-600 to-indigo-600 bg-clip-text text-transparent dark:from-slate-100 dark:via-blue-400 dark:to-indigo-400 flex items-center gap-3",children:[(0,t.jsx)(b.A,{className:"w-8 h-8 text-blue-600"}),"Histoires de Voyage"]}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-300 mt-2",children:"Cr\xe9ez et organisez vos aventures visuelles"})]}),(0,t.jsx)(l.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsxs)(A.$,{onClick:()=>{let e=Math.max(...a.map(e=>e.id))+1,r={id:e,title:"Nouvelle histoire #".concat(e),description:"D\xe9crivez votre aventure...",imageUrl:"",location:"Ville, Pays",displayType:"single"};n(e=>[...e,r]),$.oR.success("Nouvelle histoire ajout\xe9e")},className:"rounded-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white shadow-lg hover:shadow-xl transition-all duration-300 px-6",children:[(0,t.jsx)(f,{size:16,className:"mr-2"}),"Nouvelle Histoire"]})})]}),(0,t.jsx)("div",{className:"space-y-8",children:(0,t.jsx)(o.N,{children:a.map((e,a)=>(0,t.jsx)(l.P.div,{layout:!0,initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50,scale:.95},transition:{duration:.5,delay:.1*a},children:(0,t.jsxs)(N,{className:"overflow-hidden border-0 shadow-xl bg-white/80 backdrop-blur-lg dark:bg-slate-800/80 hover:shadow-2xl transition-all duration-300",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 p-1",children:(0,t.jsx)(P,{className:"bg-white dark:bg-slate-800 m-1 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(U,{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-3 rounded-full bg-gradient-to-r from-purple-500 to-pink-500",children:(0,t.jsx)(y.A,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent text-xl",children:["Histoire #",e.id]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(H.E,{variant:"single"===e.displayType?"default":"secondary",className:(0,k.cn)("text-xs","single"===e.displayType?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300"),children:"single"===e.displayType?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{className:"w-3 h-3 mr-1"}),"Image unique"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.A,{className:"w-3 h-3 mr-1"}),"Carrousel"]})}),(0,t.jsxs)(H.E,{variant:"outline",className:"text-xs",children:[Array.isArray(e.imageUrl)?e.imageUrl.length:+!!e.imageUrl," image(s)",E[e.id]&&E[e.id].length>0&&" + ".concat(E[e.id].length," nouvelle(s)")]})]})]})]}),(0,t.jsx)(l.P.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,t.jsx)(A.$,{variant:"destructive",size:"sm",onClick:()=>K(e.id),className:"rounded-full bg-red-500/90 hover:bg-red-600 shadow-lg",children:(0,t.jsx)(j,{size:16})})})]})})}),(0,t.jsxs)(L,{className:"p-8 space-y-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)(l.P.div,{className:"space-y-3",whileHover:{scale:1.02},transition:{duration:.2},children:[(0,t.jsxs)(M,{htmlFor:"title-".concat(e.id),className:"text-sm font-semibold flex items-center gap-2",children:[(0,t.jsx)(w,{className:"w-4 h-4"}),"Titre de l'histoire"]}),(0,t.jsx)(z,{id:"title-".concat(e.id),value:e.title,onChange:r=>Y(e.id,"title",r.target.value),className:"rounded-xl border-2 border-slate-200 dark:border-slate-700 focus:border-blue-400 dark:focus:border-blue-600 transition-colors duration-200 bg-white/50 dark:bg-slate-800/50",placeholder:"Un titre accrocheur..."})]}),(0,t.jsxs)(l.P.div,{className:"space-y-3",whileHover:{scale:1.02},transition:{duration:.2},children:[(0,t.jsxs)(M,{htmlFor:"location-".concat(e.id),className:"text-sm font-semibold flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"w-4 h-4"}),"Localisation"]}),(0,t.jsx)(z,{id:"location-".concat(e.id),value:e.location,onChange:r=>Y(e.id,"location",r.target.value),className:"rounded-xl border-2 border-slate-200 dark:border-slate-700 focus:border-blue-400 dark:focus:border-blue-600 transition-colors duration-200 bg-white/50 dark:bg-slate-800/50",placeholder:"Ville, Pays"})]})]}),(0,t.jsxs)(l.P.div,{className:"space-y-3",whileHover:{scale:1.01},transition:{duration:.2},children:[(0,t.jsxs)(M,{htmlFor:"description-".concat(e.id),className:"text-sm font-semibold flex items-center gap-2",children:[(0,t.jsx)(c,{className:"w-4 h-4"}),"Description de l'aventure"]}),(0,t.jsx)(R,{id:"description-".concat(e.id),value:e.description,onChange:r=>Y(e.id,"description",r.target.value),rows:4,className:"rounded-xl border-2 border-slate-200 dark:border-slate-700 focus:border-blue-400 dark:focus:border-blue-600 transition-colors duration-200 bg-white/50 dark:bg-slate-800/50 resize-none",placeholder:"Racontez votre histoire..."})]}),(0,t.jsx)(O,{className:"bg-gradient-to-r from-transparent via-slate-300 to-transparent dark:via-slate-600"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(M,{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"w-5 h-5"}),"Galerie d'Images"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(H.E,{variant:"secondary",className:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",children:[Array.isArray(e.imageUrl)?e.imageUrl.length:+!!e.imageUrl," actuelle(s)"]}),E[e.id]&&E[e.id].length>0&&(0,t.jsxs)(H.E,{variant:"default",className:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",children:["+",E[e.id].length," nouvelle(s)"]})]})]}),Array.isArray(e.imageUrl)?(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:e.imageUrl.map((r,a)=>(0,t.jsxs)(l.P.div,{className:"relative aspect-square rounded-xl overflow-hidden border-2 border-slate-200 dark:border-slate-700 group shadow-lg",whileHover:{scale:1.05,y:-5},transition:{duration:.2},children:[(0,t.jsx)(s.default,{src:r,alt:"".concat(e.title," - Image ").concat(a+1),fill:!0,className:"object-cover rounded-xl transition-transform duration-500 group-hover:scale-110"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),(0,t.jsx)(l.P.div,{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300",whileHover:{scale:1.1},children:(0,t.jsx)(A.$,{variant:"destructive",size:"sm",onClick:()=>B(e.id,a),className:"rounded-full bg-red-500/90 backdrop-blur-sm hover:bg-red-600 text-white shadow-lg",children:(0,t.jsx)(x.A,{size:16})})})]},a))}):e.imageUrl&&""!==e.imageUrl?(0,t.jsxs)(l.P.div,{className:"relative aspect-video rounded-xl overflow-hidden border-2 border-slate-200 dark:border-slate-700 max-w-md group shadow-lg",whileHover:{scale:1.02,y:-3},transition:{duration:.2},children:[(0,t.jsx)(s.default,{src:e.imageUrl,alt:e.title,fill:!0,className:"object-cover rounded-xl transition-transform duration-500 group-hover:scale-105"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),(0,t.jsx)(l.P.div,{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300",whileHover:{scale:1.1},children:(0,t.jsxs)(A.$,{variant:"destructive",size:"sm",onClick:()=>B(e.id,0),className:"rounded-full bg-red-500/90 backdrop-blur-sm hover:bg-red-600 text-white shadow-lg",children:[(0,t.jsx)(x.A,{size:16,className:"mr-2"}),"Supprimer"]})})]}):(0,t.jsxs)(l.P.div,{className:"text-center py-12 text-slate-500 dark:text-slate-400 bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-800 dark:to-blue-950/50 rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-600",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:[(0,t.jsx)(l.P.div,{animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0},children:(0,t.jsx)(g,{size:64,className:"mx-auto mb-4 opacity-30"})}),(0,t.jsx)("p",{className:"text-lg font-medium mb-2",children:"Aucune image pour cette histoire"}),(0,t.jsx)("p",{className:"text-sm",children:"Ajoutez des images pour donner vie \xe0 votre aventure"})]}),E[e.id]&&E[e.id].length>0&&(0,t.jsxs)(l.P.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"w-4 h-4 text-green-500"}),(0,t.jsx)(M,{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Nouvelles images \xe0 ajouter"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:E[e.id].map((r,a)=>(0,t.jsxs)(l.P.div,{className:"relative aspect-square rounded-xl overflow-hidden border-2 border-green-300 dark:border-green-700 shadow-lg",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*a},whileHover:{scale:1.05,y:-3},children:[(0,t.jsx)(s.default,{src:r.preview,alt:r.name,fill:!0,className:"object-cover rounded-xl"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-green-500/20 to-transparent"}),(0,t.jsx)(l.P.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,t.jsx)(A.$,{variant:"destructive",size:"sm",className:"absolute top-2 right-2 rounded-full bg-red-500/90 hover:bg-red-600 shadow-lg",onClick:()=>X(e.id,a),children:(0,t.jsx)(x.A,{size:12})})}),(0,t.jsx)("div",{className:"absolute bottom-2 left-2",children:(0,t.jsx)(H.E,{className:"bg-green-500/90 text-white text-xs",children:"Nouveau"})})]},a))})]}),(0,t.jsxs)(l.P.div,{className:"border-2 border-dashed border-purple-300 dark:border-purple-700 rounded-xl p-8 text-center cursor-pointer hover:border-purple-400 dark:hover:border-purple-600 transition-all duration-300 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950/50 dark:to-pink-950/50 hover:from-purple-100 hover:to-pink-100 dark:hover:from-purple-900/50 dark:hover:to-pink-900/50",onClick:()=>{var a;return null==(a=r.current[e.id])?void 0:a.click()},whileHover:{scale:1.02,y:-3},whileTap:{scale:.98},children:[(0,t.jsx)(l.P.div,{animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0},children:(0,t.jsx)(g,{size:48,className:"mx-auto mb-4 text-purple-500"})}),(0,t.jsx)("p",{className:"text-slate-700 dark:text-slate-300 font-medium mb-2",children:"Cliquez pour uploader des images"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm text-slate-500 dark:text-slate-400",children:[(0,t.jsx)("p",{children:"1 image = Affichage unique • 2+ images = Carrousel automatique"}),(0,t.jsx)("p",{children:"Formats accept\xe9s: JPG, PNG, WebP • S\xe9lection multiple possible"})]}),(0,t.jsx)("input",{ref:a=>{r.current[e.id]=a},type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:r=>J(e.id,r.target.files)})]})]})]})]})},e.id))})})]})]})}),(0,t.jsx)(D.A,{})]})}},3741:(e,r,a)=>{Promise.resolve().then(a.bind(a,2069))},6126:(e,r,a)=>{"use strict";a.d(r,{E:()=>n});var t=a(5155);a(2115);var i=a(4624),s=a(2085),l=a(9434);let o=(0,s.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/70",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:r,variant:a,asChild:s=!1,...n}=e,d=s?i.DX:"span";return(0,t.jsx)(d,{"data-slot":"badge",className:(0,l.cn)(o({variant:a}),r),...n})}},9434:(e,r,a)=>{"use strict";a.d(r,{cn:()=>s});var t=a(2596),i=a(9688);function s(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,i.QP)((0,t.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[208,296,671,441,684,358],()=>r(3741)),_N_E=e.O()}]);